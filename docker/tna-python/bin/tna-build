#!/bin/bash

PYPROJECT_FILE=/app/pyproject.toml
if [ ! -f "$PYPROJECT_FILE" ]
then
  echo "pyproject.toml does not exist";
  exit 1
fi

POETRY_LOCK_FILE=/app/poetry.lock
if [ ! -f "$POETRY_LOCK_FILE" ]
then
  echo "poetry.lock does not exist";
  exit 1
fi

# TODO
# if [ "$ENVIRONMENT" != "production" ]
# then
#   poetry add inotify@0.2.10
# fi

poetry add gunicorn@21.1.0
poetry install --sync --no-root
